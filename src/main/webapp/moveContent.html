<!DOCTYPE html>
<html lang="en">
<head>
<!--    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>-->
<!--        <meta http-equiv="X-UA-Compatible" content="IE=7"/>-->
<!--        <meta name="filetype" content="1">-->
<!--        <meta name="publishedtype" content="1">-->
<!--        <meta name="pagetype" content="2">-->
<!--        <meta name="catalogs" content="n_486">-->
<!--        <meta name="baidu-site-verification" content="Hc0t30TOtT6W1iYr"/>-->
    <meta charset="UTF-8">
    <meta charset="GB18030">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
<!--    <meta http-equiv="refresh" content="10">-->
    <title>更多内容</title>
<!--        <meta name="keywords"-->
<!--              content="海外看中国,重磅言论,时政要闻,经济社会,军事纵横,文化娱乐,编辑推荐,封面中国,中国影像,印媒,日媒,美媒,韩媒,外媒,外媒涉华报道,涉我新闻,世界媒体眼中的中国,外交杂志,印度时报,联合早报,路透社,共同社,美联社,独立报,卫报,南海,东海,钓鱼岛,俄罗斯,美国,日本,印度,韩国,瓦良格,航母,珍珠链">-->
<!--        <meta name="description"-->
<!--              content="“海外看中国”频道以海外媒体视角解读中国国内热点与焦点，帮助网友透过“第三只眼”看中国，了解世界媒体眼中的中国。主要有以下栏目：重磅言论，时政要闻，经济社会，军事纵横，文化娱乐，编辑推荐，封面中国，中国影像，亚洲媒体看中国，欧美媒体看中国。">-->
    <link href="css/common.css" rel="stylesheet" type="text/css"/>
    <link href="css/skinNews.css" rel="stylesheet" type="text/css"/>
    <link href="css/layoutOversea.css" rel="stylesheet" type="text/css"/>
    <link href="css/pubTopBottom.css" rel="stylesheet" type="text/css"/>
    <link href="css/topLogin.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/login.css">

    <link rel="stylesheet" href="dropzone/basic.min.css" />
    <link rel="stylesheet" href="dropzone/dropzone.min.css" />
<!--    <base target="_blank"></base>//跳转新页面-->
    <style type="text/css">
        .newsNav .newsNavCon .newsLogo-oversea {
            width: 218px;
            height: 115px;
            position: absolute;
            top: -40px;
            left: -9px;
            z-index: 9999;
            /*background: url() no-repeat;*/
        }
        a:hover{color:red;}

        .newsNav .newsNavCon .navNews {
            margin: 29px 0 0 150px;
        }

        .newsNav .newsNavCon .navNews ul {
            margin-left: 64px;
        }

        .newsNav .newsNavCon .navNews ul li {
            margin: 0 4px;
        }
        .status{
            float: right;
        }
    </style>
</head>
<body>
<!-- 公共头部分 begin -->
<div class="topIndex">
    <!--str:hdTop-->
    <div class="hdTop">
        <div class="hdTopCon">
                <span class="hdtMenu ui-topMenu">
                    <em class="hdtmArr"></em>
                </span>
            <!--str:登陆前-->
<!--            <div class="hdBefore ui-loginBefore" style="">-->
<!--                <a href="" target="_blank" class="hdtReg">注册</a>-->
<!--                <span class="hdtLogin ui-topLogin"><div class="hdtLogBoxWrap">登录</div></span>-->
<!--            </div>-->
            <!--end:登陆前-->
            <!--str:登陆后-->
<!--            <div class="hdLogged ui-loginAfter" style="display: none;">-->
<!--                <a href="" target="_self" class="hdtExit">退出</a>-->
<!--                <a href="" target="_blank" class="hdtName ui-username"></a><span-->
<!--                    class="hdtWel">欢迎你</span>-->
<!--            </div>-->
            <!--end:登陆后-->
        </div>
    </div>
    <!--end:hdTop-->
</div>
<!-- 公共头部分 end -->

<!-- 频道头 begin-->
<div class="channelHead">
    <div class="newsNav">
        <div class="newsNavCon">
            <a href="">
<!--                <div class="newsLogo-oversea">-->
<!--                    <h1><a>首页</a></h1>-->
<!--                </div>-->
            </a>
            <ul >
               <li style="float: left;list-style: none;"><span><a href="" style="font-size: 45px;text-decoration: none">首页&nbsp&nbsp&nbsp</a></span></li>
                <li style="float: left;"><span ><a href="" style="font-size: 45px; text-decoration: none" >内地</a></span></li>
                <li style="float: left;"><span  ><a href=""  style="font-size: 45px"><i class=' glyphicon glyphicon-ploy'>-></i></a></span></li>

                <li style="float: left;"><span><a href="" style="font-size: 45px; text-decoration: none">军事</a></span></li>
            </ul>
<!--            <div class="navNews">-->
<!--                <ul>-->
<!--                    <li><span><a href="">首页</a></span></li>-->
<!--                </ul>-->
<!--            </div>-->
            <div class="search">
                <form action="" method="get" id="ui-topSearch">
                    <input name="q" type="text" class="searchBox" id="ui-topSearchKeyWord"/>
                    <input name="" type="submit" class="searchBtn" value=" " id="ui-topSearchBtn"/>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- 频道头 end-->
<div class="wrap">
    <!-- 内容部分 begin-->
    <div class="wrapCon">
        <!-- 广告 end-->
        <!-- 内容第一部分 begin-->
        <div class="conFir">
            <!-- 焦点图 begin -->


            <!-- 内容第二部分 begin-->
            <!-- 头条 begin -->

            <div class="newsFir">
                <h2 class="partTit">热榜</h2>
                <ul id="newsFirContent">
                    <li class="dotLineBot">
                        <h3><a href=""
                               title="美媒：制造商想离开中国去越南，却发现不可能" target="_blank">美媒：制造商想离开中国去越南，却发现不可能</a>
                        </h3>
                        <h5>当前，美中贸易战打得难解难分，这本该是越南等国大放异彩的时候。但想取代中国却需要数年时间……</h5>
                    </li>
                </ul>
<!--                <div  class="hotPage">1111</div>-->
            </div>

            <!--        <div class="conSec">-->

            <div class="conSec">
                <!-- 左侧列表 begin-->
                <h2 class="partTit">新榜</h2>
                <div class="leftList">
                    <ul class="listContent" >

                    </ul>
                    <!-- 加载中 begin -->
<!--                    <div class="loadinigBox"><span class="loadImg"></span><em>正在加载中...</em></div>-->
                    <!-- 加载中 end -->

                    <!-- 翻页按钮 begin -->
<!--                    <div class="pageBox">-->
<!--                        <a href="" class="lookMore">查看更多</a>-->
<!--                    </div>-->
                    <!-- 翻页按钮 end -->
                </div>
                <!-- 左侧列表 begin-->
                <!-- 右侧 begin-->

            </div>

        </div>

    </div>
    <div style="margin: 5px 500px;font-size: 30px" class="timePage">1111</div>
</div>

<!-- 尾巴 begin -->
<div style="margin-top: 30px " class="footOutNew m_hide">
    <!-- 其他 begin -->
    <div class="fotherNew">
        <ul>
            <li class="fir">
                <h3>**无线</h3>
                <div class="iconList">
                    <a href="" target="_blank">环球时报客户端</a>
                </div>
            </li>
            <li class="sec">
                <h3>推荐服务</h3>
                <div class="iconList">
                    <a href="" target="_blank">环球网-官方微博</a>
                </div>
            </li>
            <li class="last">
                <h3>**时报系产品</h3>
                <div class="iconList">
                    <a href="" target="_blank">**时报版权数据库</a>
                </div>
            </li>
        </ul>
    </div>
    <!-- 其他 end -->
</div>
<div class="fLinkNew m_hide">
    <div class="flinkMainNew marWidMain">
        <a href="" target="_blank">环球网简介</a><em>|</em>
    </div>
</div>
</body>
<script src="wangeditor/wangEditor.min.js"></script>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="script/docs.min.js"></script>
<script type="text/javascript" >

    function initpage() {
        var  select=window.location.search
        if (select.search("type=")!=-1){
            select=select.split("type=")[1]
            // var defaultPage=1
            console.log(select)
            if (select=="initHotContent") {
                // initHotContent()
                initTimeContent()
                initHotContent()
            }else if (select=="initTimeContent"){
                // initTimeContent()
                initTimeContent()
                initHotContent()
            }else {
                initTimeContent()
                initHotContent()
            }
        }else {
            initTimeContent()
            initHotContent()
        }

        console.log(select)
    }
    initpage()
    function initHotContent() {
        var typeId = window.location.search.split("&typeId=")[1]
        var url=window.location.search
        // alert(url)
        // alert(url.search("pageNum") == -1 )
        if (url.search("pageNum")!=-1){
            var pageNum=url.split("?pageNum=")[1]
            pageNum=pageNum.split("&typeId=")[0]
            console.log("有pageNum"+pageNum)
        }else {
            // alert("没有pageNum")
            var pageNum=1
            console.log("pageNum为初始值1")
        }
        console.log("pageNum"+pageNum)
        var areaId = typeId.split("&areaId=")[1]
        if (areaId.search("&type=") != -1 ) {
            areaId=areaId.split("&type=")[0]
        }
        typeId = typeId.split("&areaId=")[0]

        console.log("areaId"+areaId)
        console.log("typeId"+typeId)
        //1.从后台的接口获取数据
        $.ajax({
            //请求方式GET/POST
            type: "GET",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //接受数据类型
            dataType: "json",
            //请求地址
            url: "news/listAllArticleByStatusAndHotAndTypeIdAndAreaId?pageNum="+pageNum+"&typeId=" + typeId + "&areaId=" + areaId,
            //数据，json字符串
            // data : JSON.stringify(
            //     {
            //     }),
            //请求成功
            success: function (result) {
                // console.log(result);
                var count = 0;
                $("#newsFirContent").html("");
                //js对象和jquery是不一样的，基本不能互相操作，得靠$()转换
                //2.将数据填充到table中
                $(result.list).each(function (index, item) {
                    // console.log(item)
                    var trStr = "";
                    trStr += " <li class=\"dotLineBot\" >"
                    trStr += " <h3><a onclick='articleContent("+item.articleId+")' style='text-decoration: none' "
                    trStr += " title=" + item.mainTitle + " target=\"_blank\" >" + item.mainTitle + "</a>"
                    trStr += "</h3>"
                    trStr += "<h5>" + item.subTitle + "</h5>"
                    trStr +="<div class='status'>"
                        trStr+="<span class='glyphicon glyphicon-fire' > "+item.timeHot+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                    trStr+="<span class='glyphicon glyphicon-heart'>"+item.timeArticleLoveNum+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                    trStr+="<span class='glyphicon glyphicon-user' > "+item.timeComNum+"</span>&nbsp&nbsp&nbsp"
                    trStr += "</li>"
                    trStr +="</div>"
                    //获取id并拼接
                    $("#newsFirContent").append(trStr);
                });
                if (pageNum<=1){
                    var  splicPage="<li style='float: left;margin-right: 10px'>上一页</li>";
                } else {
                    var	splicPage="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+(parseInt(pageNum,10)-1 )+"&typeId="+typeId+"&areaId="+areaId+"&type=initHotContent"+"\" id='start'>上一页</a></li>"

                }
                console.log()
                console.log("页数"+result.pages)
                for(var i=1;i<=result.pages;i++){
                    splicPage +="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+i+"&typeId="+typeId+"&areaId="+areaId+"&type=initHotContent"+"\">"+i+"</a></li>";
                }
                // alert("pageNum"+pageNum)
                console.log(pageNum>=result.pages)
                if (pageNum>=result.pages) {
                    splicPage+="<li style='float: left;margin-right: 10px'>下一页</li>";
                }else {
                    splicPage+="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+(parseInt(pageNum,10)+1 )+"&typeId="+typeId+"&areaId="+areaId+"&type=initHotContent"+"\" id='end'>下一页</a></li>";
                }
                $(".hotPage").html("");
                $(".hotPage").append(splicPage);
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.error(e);
            }
        });

    }



    function initTimeContent() {
        var typeId = window.location.search.split("&typeId=")[1]
        var url=window.location.search
        // alert(url)
        // alert(url.search("pageNum") == -1 )
        if (url.search("pageNum")!=-1){
            var pageNum=url.split("?pageNum=")[1]
            pageNum=pageNum.split("&typeId=")[0]
            console.log("有pageNum"+pageNum)
        }else {
            // alert("没有pageNum")
            var pageNum=1
            console.log("pageNum为初始值1")
        }
        console.log("pageNum"+pageNum)
        var areaId = typeId.split("&areaId=")[1]
        if (areaId.search("&type=") != -1 ) {
            areaId=areaId.split("&type=")[0]
        }
        typeId = typeId.split("&areaId=")[0]

        console.log("areaId"+areaId)
        console.log("typeId"+typeId)
        //1.从后台的接口获取数据
        $.ajax({
            //请求方式GET/POST
            type: "GET",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //接受数据类型
            dataType: "json",
            //请求地址
            url: "news/listAllArticleByStatusAndCreateTimeAndTypeIdAndAreaId?pageNum="+pageNum+"&typeId=" + typeId + "&areaId=" + areaId,
            success: function (result) {
                // console.log(result);
                var count = 0;
                // $("[name='contentList']").html("");
                $(".listContent").html("");
                //2.将数据填充到table中
                $(result.list).each(function (index, item) {
                    console.log(item)
                    var trStr = "";
                    trStr += " </a>"
                    trStr += " </li>"
                    trStr += " <li >"
                    trStr += " <h3><a onclick='articleContent("+item.articleId+")' style='text-decoration: none'"
                    trStr += " title=" + item.mainTitle + " target=\"_blank\" >" + item.mainTitle + "</a>"
                    trStr += "</h3>"

                    trStr += "<br><h5>" + item.subTitle + "……</h5>"
                    trStr +="<div class='status'>"
                    trStr+="<span class='glyphicon glyphicon-fire' > "+item.timeHot+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                    trStr+="<span class='glyphicon glyphicon-heart'>"+item.timeArticleLoveNum+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
                    trStr+="<span class='glyphicon glyphicon-user' > "+item.timeComNum+"</span>&nbsp&nbsp&nbsp"
                    trStr +="</div>"
                    trStr += "</li>"
                        //获取id并拼接
                    $(".listContent").append(trStr);
                });

                if (pageNum<=1){
                    console.log("触发pageNum<=1")
                    var  splicPage="<li style='float: left;margin-right: 10px'>上一页</li>";
                } else {
                    console.log("不触发pageNum<=1")
                    var	splicPage="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+(parseInt(pageNum,10)-1 )+"&typeId="+typeId+"&areaId="+areaId+"&type=initTimeContent"+"\" id='start'>上一页</a></li>"

                }
                console.log(111)
                console.log(result.pages)
                for(var i=1;i<=result.pages;i++){
                    splicPage +="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+i+"&typeId="+typeId+"&areaId="+areaId+"&type=initTimeContent"+"\">"+i+"</a></li>";
                }
                if (pageNum>=result.pages) {
                    console.log("触发pageNum>=max")
                    splicPage+="<li  style='float: left ;margin-right: 10px' >下一页</li>";
                }else {
                    console.log("不触发pageNum>=max")
                    splicPage+="<li style='float: left;margin-right: 10px'><a href=\"moveContent.html?pageNum="+(parseInt(pageNum,10)+1 )+"&typeId="+typeId+"&areaId="+areaId+"&type=initTimeContent"+"\" id='end'>下一页</a></li>";
                }
                $(".timePage").html("");
                $(".timePage").append(splicPage);
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.error(e);
            }
        });
    }
function articleContent(articleId) {
    $.ajax({
        //请求方式
        type : "GET",
        //请求的媒体类型
        contentType: "application/json;charset=UTF-8",
        //接受数据类型
        dataType:"json",
        //请求地址
        url : "news/toArticleContent?articleId="+articleId,
        //数据，json字符串
        //请求成功
        success : function(result) {
           if (result) {
               window.location.href="articleContentShow.html?articleId="+articleId
           }
        },
        //请求失败，包含具体的错误信息
        error : function(e){
            console.log("报错");
            console.log(e.status);
            console.log(e.responseText);
        }
    });
}


</script>

</html>